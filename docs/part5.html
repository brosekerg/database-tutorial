<!doctype html>
<html>

<head>
  <meta charset='UTF-8'>
  <meta name='viewport' content='width=device-width initial-scale=1'>
  <title>Database Tutorial, Part 5</title>
  <link href='https://fonts.loli.net/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext' rel='stylesheet' type='text/css' />
  <style type='text/css'>
    html {
      overflow-x: initial !important;
    }

    :root {
      --bg-color: #ffffff;
      --text-color: #333333;
      --select-text-bg-color: #B5D6FC;
      --select-text-font-color: auto;
      --monospace: "Lucida Console", Consolas, "Courier", monospace;
    }

    html {
      font-size: 14px;
      background-color: var(--bg-color);
      color: var(--text-color);
      font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
      -webkit-font-smoothing: antialiased;
    }

    body {
      margin: 0px;
      padding: 0px;
      height: auto;
      bottom: 0px;
      top: 0px;
      left: 0px;
      right: 0px;
      font-size: 1rem;
      line-height: 1.42857;
      overflow-x: hidden;
      background: inherit;
      tab-size: 4;
    }

    iframe {
      margin: auto;
    }

    a.url {
      word-break: break-all;
    }

    a:active,
    a:hover {
      outline: 0px;
    }

    .in-text-selection,
    ::selection {
      text-shadow: none;
      background: var(--select-text-bg-color);
      color: var(--select-text-font-color);
    }

    #write {
      margin: 0px auto;
      height: auto;
      width: inherit;
      word-break: normal;
      overflow-wrap: break-word;
      position: relative;
      white-space: normal;
      overflow-x: visible;
      padding-top: 40px;
    }

    #write.first-line-indent p {
      text-indent: 2em;
    }

    #write.first-line-indent li p,
    #write.first-line-indent p * {
      text-indent: 0px;
    }

    #write.first-line-indent li {
      margin-left: 2em;
    }

    .for-image #write {
      padding-left: 8px;
      padding-right: 8px;
    }

    body.typora-export {
      padding-left: 30px;
      padding-right: 30px;
    }

    .typora-export .footnote-line,
    .typora-export li,
    .typora-export p {
      white-space: pre-wrap;
    }

    @media screen and (max-width: 500px) {
      body.typora-export {
        padding-left: 0px;
        padding-right: 0px;
      }

      #write {
        padding-left: 20px;
        padding-right: 20px;
      }

      .CodeMirror-sizer {
        margin-left: 0px !important;
      }

      .CodeMirror-gutters {
        display: none !important;
      }
    }

    #write li>figure:last-child {
      margin-bottom: 0.5rem;
    }

    #write ol,
    #write ul {
      position: relative;
    }

    img {
      max-width: 100%;
      vertical-align: middle;
    }

    button,
    input,
    select,
    textarea {
      color: inherit;
      font: inherit;
    }

    input[type="checkbox"],
    input[type="radio"] {
      line-height: normal;
      padding: 0px;
    }

    *,
    ::after,
    ::before {
      box-sizing: border-box;
    }

    #write h1,
    #write h2,
    #write h3,
    #write h4,
    #write h5,
    #write h6,
    #write p,
    #write pre {
      width: inherit;
    }

    #write h1,
    #write h2,
    #write h3,
    #write h4,
    #write h5,
    #write h6,
    #write p {
      position: relative;
    }

    p {
      line-height: inherit;
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
      break-after: avoid-page;
      break-inside: avoid;
      orphans: 2;
    }

    p {
      orphans: 4;
    }

    h1 {
      font-size: 2rem;
    }

    h2 {
      font-size: 1.8rem;
    }

    h3 {
      font-size: 1.6rem;
    }

    h4 {
      font-size: 1.4rem;
    }

    h5 {
      font-size: 1.2rem;
    }

    h6 {
      font-size: 1rem;
    }

    .md-math-block,
    .md-rawblock,
    h1,
    h2,
    h3,
    h4,
    h5,
    h6,
    p {
      margin-top: 1rem;
      margin-bottom: 1rem;
    }

    .hidden {
      display: none;
    }

    .md-blockmeta {
      color: rgb(204, 204, 204);
      font-weight: 700;
      font-style: italic;
    }

    a {
      cursor: pointer;
    }

    sup.md-footnote {
      padding: 2px 4px;
      background-color: rgba(238, 238, 238, 0.7);
      color: rgb(85, 85, 85);
      border-radius: 4px;
      cursor: pointer;
    }

    sup.md-footnote a,
    sup.md-footnote a:hover {
      color: inherit;
      text-transform: inherit;
      text-decoration: inherit;
    }

    #write input[type="checkbox"] {
      cursor: pointer;
      width: inherit;
      height: inherit;
    }

    figure {
      overflow-x: auto;
      margin: 1.2em 0px;
      max-width: calc(100% + 16px);
      padding: 0px;
    }

    figure>table {
      margin: 0px !important;
    }

    tr {
      break-inside: avoid;
      break-after: auto;
    }

    thead {
      display: table-header-group;
    }

    table {
      border-collapse: collapse;
      border-spacing: 0px;
      width: 100%;
      overflow: auto;
      break-inside: auto;
      text-align: left;
    }

    table.md-table td {
      min-width: 32px;
    }

    .CodeMirror-gutters {
      border-right: 0px;
      background-color: inherit;
    }

    .CodeMirror-linenumber {
      user-select: none;
    }

    .CodeMirror {
      text-align: left;
    }

    .CodeMirror-placeholder {
      opacity: 0.3;
    }

    .CodeMirror pre {
      padding: 0px 4px;
    }

    .CodeMirror-lines {
      padding: 0px;
    }

    div.hr:focus {
      cursor: none;
    }

    #write pre {
      white-space: pre-wrap;
    }

    #write.fences-no-line-wrapping pre {
      white-space: pre;
    }

    #write pre.ty-contain-cm {
      white-space: normal;
    }

    .CodeMirror-gutters {
      margin-right: 4px;
    }

    .md-fences {
      font-size: 0.9rem;
      display: block;
      break-inside: avoid;
      text-align: left;
      overflow: visible;
      white-space: pre;
      background: inherit;
      position: relative !important;
    }

    .md-diagram-panel {
      width: 100%;
      margin-top: 10px;
      text-align: center;
      padding-top: 0px;
      padding-bottom: 8px;
      overflow-x: auto;
    }

    #write .md-fences.mock-cm {
      white-space: pre-wrap;
    }

    .md-fences.md-fences-with-lineno {
      padding-left: 0px;
    }

    #write.fences-no-line-wrapping .md-fences.mock-cm {
      white-space: pre;
      overflow-x: auto;
    }

    .md-fences.mock-cm.md-fences-with-lineno {
      padding-left: 8px;
    }

    .CodeMirror-line,
    twitterwidget {
      break-inside: avoid;
    }

    .footnotes {
      opacity: 0.8;
      font-size: 0.9rem;
      margin-top: 1em;
      margin-bottom: 1em;
    }

    .footnotes+.footnotes {
      margin-top: 0px;
    }

    .md-reset {
      margin: 0px;
      padding: 0px;
      border: 0px;
      outline: 0px;
      vertical-align: top;
      background: 0px 0px;
      text-decoration: none;
      text-shadow: none;
      float: none;
      position: static;
      width: auto;
      height: auto;
      white-space: nowrap;
      cursor: inherit;
      -webkit-tap-highlight-color: transparent;
      line-height: normal;
      font-weight: 400;
      text-align: left;
      box-sizing: content-box;
      direction: ltr;
    }

    li div {
      padding-top: 0px;
    }

    blockquote {
      margin: 1rem 0px;
    }

    li .mathjax-block,
    li p {
      margin: 0.5rem 0px;
    }

    li {
      margin: 0px;
      position: relative;
    }

    blockquote> :last-child {
      margin-bottom: 0px;
    }

    blockquote> :first-child,
    li> :first-child {
      margin-top: 0px;
    }

    .footnotes-area {
      color: rgb(136, 136, 136);
      margin-top: 0.714rem;
      padding-bottom: 0.143rem;
      white-space: normal;
    }

    #write .footnote-line {
      white-space: pre-wrap;
    }

    @media print {

      body,
      html {
        border: 1px solid transparent;
        height: 99%;
        break-after: avoid;
        break-before: avoid;
      }

      #write {
        margin-top: 0px;
        padding-top: 0px;
        border-color: transparent !important;
      }

      .typora-export * {
        -webkit-print-color-adjust: exact;
      }

      html.blink-to-pdf {
        font-size: 13px;
      }

      .typora-export #write {
        padding-left: 32px;
        padding-right: 32px;
        padding-bottom: 0px;
        break-after: avoid;
      }

      .typora-export #write::after {
        height: 0px;
      }
    }

    .footnote-line {
      margin-top: 0.714em;
      font-size: 0.7em;
    }

    a img,
    img a {
      cursor: pointer;
    }

    pre.md-meta-block {
      font-size: 0.8rem;
      min-height: 0.8rem;
      white-space: pre-wrap;
      background: rgb(204, 204, 204);
      display: block;
      overflow-x: hidden;
    }

    p>.md-image:only-child:not(.md-img-error) img,
    p>img:only-child {
      display: block;
      margin: auto;
    }

    p>.md-image:only-child {
      display: inline-block;
      width: 100%;
    }

    #write .MathJax_Display {
      margin: 0.8em 0px 0px;
    }

    .md-math-block {
      width: 100%;
    }

    .md-math-block:not(:empty)::after {
      display: none;
    }

    [contenteditable="true"]:active,
    [contenteditable="true"]:focus {
      outline: 0px;
      box-shadow: none;
    }

    .md-task-list-item {
      position: relative;
      list-style-type: none;
    }

    .task-list-item.md-task-list-item {
      padding-left: 0px;
    }

    .md-task-list-item>input {
      position: absolute;
      top: 0px;
      left: 0px;
      margin-left: -1.2em;
      margin-top: calc(1em - 10px);
      border: none;
    }

    .math {
      font-size: 1rem;
    }

    .md-toc {
      min-height: 3.58rem;
      position: relative;
      font-size: 0.9rem;
      border-radius: 10px;
    }

    .md-toc-content {
      position: relative;
      margin-left: 0px;
    }

    .md-toc-content::after,
    .md-toc::after {
      display: none;
    }

    .md-toc-item {
      display: block;
      color: rgb(65, 131, 196);
    }

    .md-toc-item a {
      text-decoration: none;
    }

    .md-toc-inner:hover {
      text-decoration: underline;
    }

    .md-toc-inner {
      display: inline-block;
      cursor: pointer;
    }

    .md-toc-h1 .md-toc-inner {
      margin-left: 0px;
      font-weight: 700;
    }

    .md-toc-h2 .md-toc-inner {
      margin-left: 2em;
    }

    .md-toc-h3 .md-toc-inner {
      margin-left: 4em;
    }

    .md-toc-h4 .md-toc-inner {
      margin-left: 6em;
    }

    .md-toc-h5 .md-toc-inner {
      margin-left: 8em;
    }

    .md-toc-h6 .md-toc-inner {
      margin-left: 10em;
    }

    @media screen and (max-width: 48em) {
      .md-toc-h3 .md-toc-inner {
        margin-left: 3.5em;
      }

      .md-toc-h4 .md-toc-inner {
        margin-left: 5em;
      }

      .md-toc-h5 .md-toc-inner {
        margin-left: 6.5em;
      }

      .md-toc-h6 .md-toc-inner {
        margin-left: 8em;
      }
    }

    a.md-toc-inner {
      font-size: inherit;
      font-style: inherit;
      font-weight: inherit;
      line-height: inherit;
    }

    .footnote-line a:not(.reversefootnote) {
      color: inherit;
    }

    .md-attr {
      display: none;
    }

    .md-fn-count::after {
      content: ".";
    }

    code,
    pre,
    samp,
    tt {
      font-family: var(--monospace);
    }

    kbd {
      margin: 0px 0.1em;
      padding: 0.1em 0.6em;
      font-size: 0.8em;
      color: rgb(36, 39, 41);
      background: rgb(255, 255, 255);
      border: 1px solid rgb(173, 179, 185);
      border-radius: 3px;
      box-shadow: rgba(12, 13, 14, 0.2) 0px 1px 0px, rgb(255, 255, 255) 0px 0px 0px 2px inset;
      white-space: nowrap;
      vertical-align: middle;
    }

    .md-comment {
      color: rgb(162, 127, 3);
      opacity: 0.8;
      font-family: var(--monospace);
    }

    code {
      text-align: left;
      vertical-align: initial;
    }

    a.md-print-anchor {
      white-space: pre !important;
      border-width: initial !important;
      border-style: none !important;
      border-color: initial !important;
      display: inline-block !important;
      position: absolute !important;
      width: 1px !important;
      right: 0px !important;
      outline: 0px !important;
      background: 0px 0px !important;
      text-decoration: initial !important;
      text-shadow: initial !important;
    }

    .md-inline-math .MathJax_SVG .noError {
      display: none !important;
    }

    .html-for-mac .inline-math-svg .MathJax_SVG {
      vertical-align: 0.2px;
    }

    .md-math-block .MathJax_SVG_Display {
      text-align: center;
      margin: 0px;
      position: relative;
      text-indent: 0px;
      max-width: none;
      max-height: none;
      min-height: 0px;
      min-width: 100%;
      width: auto;
      overflow-y: hidden;
      display: block !important;
    }

    .MathJax_SVG_Display,
    .md-inline-math .MathJax_SVG_Display {
      width: auto;
      margin: inherit;
      display: inline-block !important;
    }

    .MathJax_SVG .MJX-monospace {
      font-family: var(--monospace);
    }

    .MathJax_SVG .MJX-sans-serif {
      font-family: sans-serif;
    }

    .MathJax_SVG {
      display: inline;
      font-style: normal;
      font-weight: 400;
      line-height: normal;
      zoom: 90%;
      text-indent: 0px;
      text-align: left;
      text-transform: none;
      letter-spacing: normal;
      word-spacing: normal;
      overflow-wrap: normal;
      white-space: nowrap;
      float: none;
      direction: ltr;
      max-width: none;
      max-height: none;
      min-width: 0px;
      min-height: 0px;
      border: 0px;
      padding: 0px;
      margin: 0px;
    }

    .MathJax_SVG * {
      transition: none 0s ease 0s;
    }

    .MathJax_SVG_Display svg {
      vertical-align: middle !important;
      margin-bottom: 0px !important;
      margin-top: 0px !important;
    }

    .os-windows.monocolor-emoji .md-emoji {
      font-family: "Segoe UI Symbol", sans-serif;
    }

    .md-diagram-panel>svg {
      max-width: 100%;
    }

    [lang="mermaid"] svg,
    [lang="flow"] svg {
      max-width: 100%;
      height: auto;
    }

    [lang="mermaid"] .node text {
      font-size: 1rem;
    }

    table tr th {
      border-bottom: 0px;
    }

    video {
      max-width: 100%;
      display: block;
      margin: 0px auto;
    }

    iframe {
      max-width: 100%;
      width: 100%;
      border: none;
    }

    .highlight td,
    .highlight tr {
      border: 0px;
    }


    .CodeMirror {
      height: auto;
    }

    .CodeMirror.cm-s-inner {
      background: inherit;
    }

    .CodeMirror-scroll {
      overflow: auto hidden;
      z-index: 3;
    }

    .CodeMirror-gutter-filler,
    .CodeMirror-scrollbar-filler {
      background-color: rgb(255, 255, 255);
    }

    .CodeMirror-gutters {
      border-right: 1px solid rgb(221, 221, 221);
      background: inherit;
      white-space: nowrap;
    }

    .CodeMirror-linenumber {
      padding: 0px 3px 0px 5px;
      text-align: right;
      color: rgb(153, 153, 153);
    }

    .cm-s-inner .cm-keyword {
      color: rgb(119, 0, 136);
    }

    .cm-s-inner .cm-atom,
    .cm-s-inner.cm-atom {
      color: rgb(34, 17, 153);
    }

    .cm-s-inner .cm-number {
      color: rgb(17, 102, 68);
    }

    .cm-s-inner .cm-def {
      color: rgb(0, 0, 255);
    }

    .cm-s-inner .cm-variable {
      color: rgb(0, 0, 0);
    }

    .cm-s-inner .cm-variable-2 {
      color: rgb(0, 85, 170);
    }

    .cm-s-inner .cm-variable-3 {
      color: rgb(0, 136, 85);
    }

    .cm-s-inner .cm-string {
      color: rgb(170, 17, 17);
    }

    .cm-s-inner .cm-property {
      color: rgb(0, 0, 0);
    }

    .cm-s-inner .cm-operator {
      color: rgb(152, 26, 26);
    }

    .cm-s-inner .cm-comment,
    .cm-s-inner.cm-comment {
      color: rgb(170, 85, 0);
    }

    .cm-s-inner .cm-string-2 {
      color: rgb(255, 85, 0);
    }

    .cm-s-inner .cm-meta {
      color: rgb(85, 85, 85);
    }

    .cm-s-inner .cm-qualifier {
      color: rgb(85, 85, 85);
    }

    .cm-s-inner .cm-builtin {
      color: rgb(51, 0, 170);
    }

    .cm-s-inner .cm-bracket {
      color: rgb(153, 153, 119);
    }

    .cm-s-inner .cm-tag {
      color: rgb(17, 119, 0);
    }

    .cm-s-inner .cm-attribute {
      color: rgb(0, 0, 204);
    }

    .cm-s-inner .cm-header,
    .cm-s-inner.cm-header {
      color: rgb(0, 0, 255);
    }

    .cm-s-inner .cm-quote,
    .cm-s-inner.cm-quote {
      color: rgb(0, 153, 0);
    }

    .cm-s-inner .cm-hr,
    .cm-s-inner.cm-hr {
      color: rgb(153, 153, 153);
    }

    .cm-s-inner .cm-link,
    .cm-s-inner.cm-link {
      color: rgb(0, 0, 204);
    }

    .cm-negative {
      color: rgb(221, 68, 68);
    }

    .cm-positive {
      color: rgb(34, 153, 34);
    }

    .cm-header,
    .cm-strong {
      font-weight: 700;
    }

    .cm-del {
      text-decoration: line-through;
    }

    .cm-em {
      font-style: italic;
    }

    .cm-link {
      text-decoration: underline;
    }

    .cm-error {
      color: red;
    }

    .cm-invalidchar {
      color: red;
    }

    .cm-constant {
      color: rgb(38, 139, 210);
    }

    .cm-defined {
      color: rgb(181, 137, 0);
    }

    div.CodeMirror span.CodeMirror-matchingbracket {
      color: rgb(0, 255, 0);
    }

    div.CodeMirror span.CodeMirror-nonmatchingbracket {
      color: rgb(255, 34, 34);
    }

    .cm-s-inner .CodeMirror-activeline-background {
      background: inherit;
    }

    .CodeMirror {
      position: relative;
      overflow: hidden;
    }

    .CodeMirror-scroll {
      height: 100%;
      outline: 0px;
      position: relative;
      box-sizing: content-box;
      background: inherit;
    }

    .CodeMirror-sizer {
      position: relative;
    }

    .CodeMirror-gutter-filler,
    .CodeMirror-hscrollbar,
    .CodeMirror-scrollbar-filler,
    .CodeMirror-vscrollbar {
      position: absolute;
      z-index: 6;
      display: none;
    }

    .CodeMirror-vscrollbar {
      right: 0px;
      top: 0px;
      overflow: hidden;
    }

    .CodeMirror-hscrollbar {
      bottom: 0px;
      left: 0px;
      overflow: hidden;
    }

    .CodeMirror-scrollbar-filler {
      right: 0px;
      bottom: 0px;
    }

    .CodeMirror-gutter-filler {
      left: 0px;
      bottom: 0px;
    }

    .CodeMirror-gutters {
      position: absolute;
      left: 0px;
      top: 0px;
      padding-bottom: 30px;
      z-index: 3;
    }

    .CodeMirror-gutter {
      white-space: normal;
      height: 100%;
      box-sizing: content-box;
      padding-bottom: 30px;
      margin-bottom: -32px;
      display: inline-block;
    }

    .CodeMirror-gutter-wrapper {
      position: absolute;
      z-index: 4;
      background: 0px 0px !important;
      border: none !important;
    }

    .CodeMirror-gutter-background {
      position: absolute;
      top: 0px;
      bottom: 0px;
      z-index: 4;
    }

    .CodeMirror-gutter-elt {
      position: absolute;
      cursor: default;
      z-index: 4;
    }

    .CodeMirror-lines {
      cursor: text;
    }

    .CodeMirror pre {
      border-radius: 0px;
      border-width: 0px;
      background: 0px 0px;
      font-family: inherit;
      font-size: inherit;
      margin: 0px;
      white-space: pre;
      overflow-wrap: normal;
      color: inherit;
      z-index: 2;
      position: relative;
      overflow: visible;
    }

    .CodeMirror-wrap pre {
      overflow-wrap: break-word;
      white-space: pre-wrap;
      word-break: normal;
    }

    .CodeMirror-code pre {
      border-right: 30px solid transparent;
      width: fit-content;
    }

    .CodeMirror-wrap .CodeMirror-code pre {
      border-right: none;
      width: auto;
    }

    .CodeMirror-linebackground {
      position: absolute;
      left: 0px;
      right: 0px;
      top: 0px;
      bottom: 0px;
      z-index: 0;
    }

    .CodeMirror-linewidget {
      position: relative;
      z-index: 2;
      overflow: auto;
    }

    .CodeMirror-wrap .CodeMirror-scroll {
      overflow-x: hidden;
    }

    .CodeMirror-measure {
      position: absolute;
      width: 100%;
      height: 0px;
      overflow: hidden;
      visibility: hidden;
    }

    .CodeMirror-measure pre {
      position: static;
    }

    .CodeMirror div.CodeMirror-cursor {
      position: absolute;
      visibility: hidden;
      border-right: none;
      width: 0px;
    }

    .CodeMirror div.CodeMirror-cursor {
      visibility: hidden;
    }

    .CodeMirror-focused div.CodeMirror-cursor {
      visibility: inherit;
    }

    .cm-searching {
      background: rgba(255, 255, 0, 0.4);
    }

    @media print {
      .CodeMirror div.CodeMirror-cursor {
        visibility: hidden;
      }
    }


    :root {
      --side-bar-bg-color: #fafafa;
      --control-text-color: #777;
    }

    html {
      font-size: 16px;
    }

    body {
      font-family: "Open Sans", "Clear Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
      color: rgb(51, 51, 51);
      line-height: 1.6;
    }

    #write {
      max-width: 860px;
      margin: 0px auto;
      padding: 30px 30px 100px;
    }

    #write>ul:first-child,
    #write>ol:first-child {
      margin-top: 30px;
    }

    a {
      color: rgb(65, 131, 196);
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
      position: relative;
      margin-top: 1rem;
      margin-bottom: 1rem;
      font-weight: bold;
      line-height: 1.4;
      cursor: text;
    }

    h1:hover a.anchor,
    h2:hover a.anchor,
    h3:hover a.anchor,
    h4:hover a.anchor,
    h5:hover a.anchor,
    h6:hover a.anchor {
      text-decoration: none;
    }

    h1 tt,
    h1 code {
      font-size: inherit;
    }

    h2 tt,
    h2 code {
      font-size: inherit;
    }

    h3 tt,
    h3 code {
      font-size: inherit;
    }

    h4 tt,
    h4 code {
      font-size: inherit;
    }

    h5 tt,
    h5 code {
      font-size: inherit;
    }

    h6 tt,
    h6 code {
      font-size: inherit;
    }

    h1 {
      padding-bottom: 0.3em;
      font-size: 2.25em;
      line-height: 1.2;
      border-bottom: 1px solid rgb(238, 238, 238);
    }

    h2 {
      padding-bottom: 0.3em;
      font-size: 1.75em;
      line-height: 1.225;
      border-bottom: 1px solid rgb(238, 238, 238);
    }

    h3 {
      font-size: 1.5em;
      line-height: 1.43;
    }

    h4 {
      font-size: 1.25em;
    }

    h5 {
      font-size: 1em;
    }

    h6 {
      font-size: 1em;
      color: rgb(119, 119, 119);
    }

    p,
    blockquote,
    ul,
    ol,
    dl,
    table {
      margin: 0.8em 0px;
    }

    li>ol,
    li>ul {
      margin: 0px;
    }

    hr {
      height: 2px;
      padding: 0px;
      margin: 16px 0px;
      background-color: rgb(231, 231, 231);
      border: 0px none;
      overflow: hidden;
      box-sizing: content-box;
    }

    li p.first {
      display: inline-block;
    }

    ul,
    ol {
      padding-left: 30px;
    }

    ul:first-child,
    ol:first-child {
      margin-top: 0px;
    }

    ul:last-child,
    ol:last-child {
      margin-bottom: 0px;
    }

    blockquote {
      border-left: 4px solid rgb(223, 226, 229);
      padding: 0px 15px;
      color: rgb(119, 119, 119);
    }

    blockquote blockquote {
      padding-right: 0px;
    }

    table {
      padding: 0px;
      word-break: initial;
    }

    table tr {
      border-top: 1px solid rgb(223, 226, 229);
      margin: 0px;
      padding: 0px;
    }

    table tr:nth-child(2n),
    thead {
      background-color: rgb(248, 248, 248);
    }

    table tr th {
      font-weight: bold;
      border-width: 1px 1px 0px;
      border-top-style: solid;
      border-right-style: solid;
      border-left-style: solid;
      border-top-color: rgb(223, 226, 229);
      border-right-color: rgb(223, 226, 229);
      border-left-color: rgb(223, 226, 229);
      border-image: initial;
      border-bottom-style: initial;
      border-bottom-color: initial;
      margin: 0px;
      padding: 6px 13px;
    }

    table tr td {
      border: 1px solid rgb(223, 226, 229);
      margin: 0px;
      padding: 6px 13px;
    }

    table tr th:first-child,
    table tr td:first-child {
      margin-top: 0px;
    }

    table tr th:last-child,
    table tr td:last-child {
      margin-bottom: 0px;
    }

    .CodeMirror-lines {
      padding-left: 4px;
    }

    .code-tooltip {
      box-shadow: rgba(0, 28, 36, 0.3) 0px 1px 1px 0px;
      border-top: 1px solid rgb(238, 242, 242);
    }

    .md-fences,
    code,
    tt {
      border: 1px solid rgb(231, 234, 237);
      background-color: rgb(248, 248, 248);
      border-radius: 3px;
      padding: 2px 4px 0px;
      font-size: 0.9em;
    }

    code {
      background-color: rgb(243, 244, 244);
      padding: 0px 2px;
    }

    .md-fences {
      margin-bottom: 15px;
      margin-top: 15px;
      padding-top: 8px;
      padding-bottom: 6px;
    }

    .md-task-list-item>input {
      margin-left: -1.3em;
    }

    @media print {
      html {
        font-size: 13px;
      }

      table,
      pre {
        break-inside: avoid;
      }

      pre {
        overflow-wrap: break-word;
      }
    }

    .md-fences {
      background-color: rgb(248, 248, 248);
    }

    #write pre.md-meta-block {
      padding: 1rem;
      font-size: 85%;
      line-height: 1.45;
      background-color: rgb(247, 247, 247);
      border: 0px;
      border-radius: 3px;
      color: rgb(119, 119, 119);
      margin-top: 0px !important;
    }

    .mathjax-block>.code-tooltip {
      bottom: 0.375rem;
    }

    .md-mathjax-midline {
      background: rgb(250, 250, 250);
    }

    #write>h3.md-focus::before {
      left: -1.5625rem;
      top: 0.375rem;
    }

    #write>h4.md-focus::before {
      left: -1.5625rem;
      top: 0.285714rem;
    }

    #write>h5.md-focus::before {
      left: -1.5625rem;
      top: 0.285714rem;
    }

    #write>h6.md-focus::before {
      left: -1.5625rem;
      top: 0.285714rem;
    }

    .md-image>.md-meta {
      border-radius: 3px;
      padding: 2px 0px 0px 4px;
      font-size: 0.9em;
      color: inherit;
    }

    .md-tag {
      color: rgb(167, 167, 167);
      opacity: 1;
    }

    .md-toc {
      margin-top: 20px;
      padding-bottom: 20px;
    }

    .sidebar-tabs {
      border-bottom: none;
    }

    #typora-quick-open {
      border: 1px solid rgb(221, 221, 221);
      background-color: rgb(248, 248, 248);
    }

    #typora-quick-open-item {
      background-color: rgb(250, 250, 250);
      border-color: rgb(254, 254, 254) rgb(229, 229, 229) rgb(229, 229, 229) rgb(238, 238, 238);
      border-style: solid;
      border-width: 1px;
    }

    .on-focus-mode blockquote {
      border-left-color: rgba(85, 85, 85, 0.12);
    }

    header,
    .context-menu,
    .megamenu-content,
    footer {
      font-family: "Segoe UI", Arial, sans-serif;
    }

    .file-node-content:hover .file-node-icon,
    .file-node-content:hover .file-node-open-state {
      visibility: visible;
    }

    .mac-seamless-mode #typora-sidebar {
      background-color: var(--side-bar-bg-color);
    }

    .md-lang {
      color: rgb(180, 101, 77);
    }

    .html-for-mac .context-menu {
      --item-hover-bg-color: #E6F0FE;
    }

    #md-notification .btn {
      border: 0px;
    }

    .dropdown-menu .divider {
      border-color: rgb(229, 229, 229);
    }

    .ty-preferences .window-content {
      background-color: rgb(250, 250, 250);
    }

    .ty-preferences .nav-group-item.active {
      color: white;
      background: rgb(153, 153, 153);
    }
  </style>
</head>

<body class='typora-export os-windows'>
  <div id='write' class='is-node'>
    <h1><a name="databases-in-context-a-just-in-time-tutorial-part-5" class="md-header-anchor"></a><span>Databases in Context: A Just-in-Time Tutorial, Part 5</span></h1>
    <p><a href='https://www.linkedin.com/in/steve-mattingly-aab8064a'><span>Steve Mattingly</span></a><span>, Assistant Professor of Computer Science, </span><a href='https://www.dewv.edu'><span>Davis &amp; Elkins College</span></a><span>.</span></p>
    <p><em><span>Databases in Context: A Just-in-Time Tutorial</span></em><span> by Stephen S. Mattingly is licensed under a </span><a href='http://creativecommons.org/licenses/by-sa/4.0/'><span>Creative Commons Attribution-ShareAlike 4.0 International License</span></a><span>. </span><img src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png" referrerpolicy="no-referrer" alt="Creative Commons Attribution-ShareAlike 4.0 International License"></p>
    <hr />
    <p><span>Learn more about Open Educational Resources at </span><a href='http://www.unesco.org/new/en/communication-and-information/access-to-knowledge/open-educational-resources/'><span>UNESCO</span></a><span>. </span><img src="http://www.unesco.org/new/typo3temp/pics/5d3118e041.jpg" referrerpolicy="no-referrer" alt="UNESCO Open Educational Resources logo"></p>
    <hr />
    <p><a href='#contents-n77'><span>Contents</span></a></p>
    <hr />
    <h2><a name="accessing-databases-from-application-code" class="md-header-anchor"></a><span>Accessing databases from application code</span></h2>
    <p><span>Now that the Learning Center&#39;s MySQL database is in good shape, consider applications software that makes use of that database.</span></p>
    <h3><a name="embedded-sql" class="md-header-anchor"></a><span>Embedded SQL</span></h3>
    <p><span>In one common approach, applications software uses database connection libraries to embed SQL statements within the application&#39;s code. These libraries are programming language specific, but exist for nearly ever language. Often they are specific to a single DBMS as well, but some will support multiple database products.</span></p>
    <p><span>Here is an example of Node.js code (server-side JavaScript) that uses such a library. It is taken from an early version of the Web application that students use to check in and out of the Learning Center. You don&#39;t need to understand all the code; just note the following.</span></p>
    <ul>
      <li>
        <p><span>This function reads a single record from the database&#39;s </span><code>student</code><span> table by looking up a specified student email address.</span></p>
      </li>
      <li>
        <p><span>It uses </span><code>db</code><span>, an object provided by a database connectivity library which allows the application to communicate with the MySQL database using the </span><code>db.query()</code><span> function.</span></p>
      </li>
      <li>
        <p><span>The </span><code>db.query()</code><span> function expects two arguments.</span></p>
        <ul>
          <li><span>The first is a string that contains an SQL statement.</span></li>
          <li><span>The second is a function that will be called to process the results after the SQL statement has executed.</span></li>
        </ul>
      </li>
      <li>
        <p><span>The rows returned by the SQL statement are provided to the application code in an array named </span><code>rows</code><span>. </span></p>
        <ul>
          <li><span>Each element of the array is an object with properties that match the columns in the database table.</span></li>
        </ul>
      </li>
      <li>
        <p><span>The </span><code>read</code><span> function modifies the current object </span><code>student</code><span> so that it contains all of the student data from the database lookup. The property names of this JavaScript object are somewhat different from the database column names. </span></p>
      </li>
    </ul>
    <pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="javascript" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="javascript"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8.4209px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><span><span>​</span>x</span></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-comment">/** Reads the database record for a specified student.</span></span></pre>
  </div>
  <pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp; &nbsp; * @argument callback - A function to be called when this async operation completes.</span></span></pre>
  <pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp; &nbsp; */</span></span></pre>
  <pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">read</span>(<span class="cm-variable">callback</span>) {</span></pre>
  <pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">var</span> <span class="cm-def">student</span> <span class="cm-operator">=</span> <span class="cm-keyword">this</span>;</span></pre>
  <pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre>
  <pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// Execute the query</span></span></pre>
  <pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">db</span>.<span class="cm-property">query</span>(<span class="cm-string">'SELECT * FROM student WHERE email = "'</span> <span class="cm-operator">+</span> <span class="cm-variable">student</span>.<span class="cm-property">email</span> <span class="cm-operator">+</span> <span class="cm-string">'";'</span>,</span></pre>
  <pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// Process the results</span></span></pre>
  <pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">function</span>(<span class="cm-def">error</span>, <span class="cm-def">rows</span>) {</span></pre>
  <pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// Check for problems</span></span></pre>
  <pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable-2">error</span>) {</span></pre>
  <pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">callback</span>(<span class="cm-keyword">new</span> <span class="cm-variable">Error</span>(<span class="cm-string">'Unable to read Student '</span> <span class="cm-operator">+</span> <span class="cm-variable">student</span>.<span class="cm-property">email</span> <span class="cm-operator">+</span> <span class="cm-string">' from database.'</span>));</span></pre>
  <pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  }</span></pre>
  <pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable-2">rows</span>.<span class="cm-property">length</span> <span class="cm-operator">===</span> <span class="cm-number">0</span>) {</span></pre>
  <pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">callback</span>(<span class="cm-keyword">new</span> <span class="cm-variable">Error</span>(<span class="cm-string">'Student '</span> <span class="cm-operator">+</span> <span class="cm-variable">student</span>.<span class="cm-property">email</span> <span class="cm-operator">+</span> <span class="cm-string">' does not exist.'</span>));</span></pre>
  <pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  }</span></pre>
  <pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></pre>
  <pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// No problems; copy the first result row's data into the student object</span></span></pre>
  <pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">that</span>.<span class="cm-property">id</span> <span class="cm-operator">=</span> <span class="cm-variable-2">rows</span>[<span class="cm-number">0</span>].<span class="cm-property">id</span>;</span></pre>
  <pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">that</span>.<span class="cm-property">username</span> <span class="cm-operator">=</span> <span class="cm-variable-2">rows</span>[<span class="cm-number">0</span>].<span class="cm-property">username</span>;</span></pre>
  <pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">student</span>.<span class="cm-property">firstName</span> <span class="cm-operator">=</span> <span class="cm-variable-2">rows</span>[<span class="cm-number">0</span>].<span class="cm-property">first_name</span>;</span></pre>
  <pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">student</span>.<span class="cm-property">lastName</span> <span class="cm-operator">=</span> <span class="cm-variable-2">rows</span>[<span class="cm-number">0</span>].<span class="cm-property">last_name</span>;</span></pre>
  <pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">student</span>.<span class="cm-property">academicRank</span> <span class="cm-operator">=</span> <span class="cm-variable-2">rows</span>[<span class="cm-number">0</span>].<span class="cm-property">academic_rank</span>;</span></pre>
  <pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">student</span>.<span class="cm-property">residentialStatus</span> <span class="cm-operator">=</span> <span class="cm-variable-2">rows</span>[<span class="cm-number">0</span>].<span class="cm-property">residential_status</span>;</span></pre>
  <pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">student</span>.<span class="cm-property">slpInstructorFirstName</span> <span class="cm-operator">=</span> <span class="cm-variable-2">rows</span>[<span class="cm-number">0</span>].<span class="cm-property">slp_instructor_first_name</span>;</span></pre>
  <pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">student</span>.<span class="cm-property">slpInstructorLastName</span> <span class="cm-operator">=</span> <span class="cm-variable-2">rows</span>[<span class="cm-number">0</span>].<span class="cm-property">slp_instructor_last_name</span>;</span></pre>
  <pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">callback</span>(<span class="cm-variable">student</span>);</span></pre>
  <pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  }</span></pre>
  <pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  );</span></pre>
  <pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre>
  </div>
  </div>
  </div>
  </div>
  </div>
  <div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 759px;"></div>
  <div class="CodeMirror-gutters" style="display: none; height: 759px;"></div>
  </div>
  </div>
  </pre>
  <h4><a name="sql-injection-attacks" class="md-header-anchor"></a><span>SQL injection attacks</span></h4>
  <p><span>As shown, this code is vulnerable to </span><strong><span>SQL injection attacks</span></strong><span>, where an attacker types SQL into data forms in an attempt to gain unauthorized access.</span></p>
  <p><span>Before reading further, earn more about SQL injection attacks, work through the online tutorial at </span><a href='https://www.hacksplaining.com/exercises/sql-injection' target='_blank' class='url'>https://www.hacksplaining.com/exercises/sql-injection</a><span>. </span></p>
  <p><span>The basic attack shown in the Web tutorial is based on the truth table for the Boolean </span><code>OR</code><span> operation. Recall that the result of any </span><code>OR</code><span> expression is true if </span><em><span>either</span></em><span> of its inputs is true. </span></p>
  <p><span>By creating an </span><code>OR TRUE</code><span> expression (using </span><code>1=1</code><span> for &quot;true&quot;), the hacker gains access without knowing the password. Notice the submitted text, </span><code>&#39; or 1=1--</code><span> , starts with a single quote to &quot;cheat&quot; and terminate the code&#39;s string value early. However, that leaves the code&#39;s closing single quote at the end of the query, which would cause a syntax error. But the hacker cleverly comments it out by ending the input with a double dash.</span></p>
  <p><span>This trick can be used for more than bypassing passwords. Because it can &quot;disable&quot; an embedded </span><code>WHERE</code><span> clause, it will often cause a vulnerable application to display rows to a user that the user was not authorized to see</span></p>
  <p><span>There are many other types of SQL injection attacks, including:</span></p>
  <ul>
    <li><span>using the </span><code>UNION</code><span> operator to run any union-compatible query that the attacker chooses, and</span></li>
    <li><span>using </span><code>;</code><span> to terminate the entire embedded query early, and following it with a second SQL statement of the attacker&#39;s choice.</span></li>
  </ul>
  <p><span>As you have seen with your homework, most DBMS products provide &quot;queries&quot; that allow you to write to and read from the OS file system. This means that an SQL injection attack can be the first step to an intruder gaining much more extensive access to the server.</span></p>
  <h4><a name="eliminating-sql-injection-vulnerabilities" class="md-header-anchor"></a><span>Eliminating SQL injection vulnerabilities</span></h4>
  <p><span>To prevent these kinds of attacks, use a combination of techniques, both in the application&#39;s code and in the DBMS server.</span></p>
  <p><span>In simplest terms, Web application developers cannot trust any information entered by a user-- it may be the type of malicious input shown above. The application must test all user input to avoid processing malicious inputs. In early Web apps, these tests were written directly into the applications code-- scanning for dangerous symbols, etc. But modern Web programming tools provide prewritten data tests.</span></p>
  <p><span>For example, a better way to write the Learning Center app&#39;s insecure </span><code>db.query()</code><span> call is:</span></p>
  <pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="javascript"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="javascript"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8.4209px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre>
  </div>
  <div class="CodeMirror-measure"></div>
  <div style="position: relative; z-index: 1;"></div>
  <div class="CodeMirror-code" role="presentation" style="">
    <div class="CodeMirror-activeline" style="position: relative;">
      <div class="CodeMirror-activeline-background CodeMirror-linebackground"></div>
      <div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div>
      <pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">...</span></span></pre>
    </div>
    <pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// Execute the query</span></span></pre>
    <pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">db</span>.<span class="cm-property">query</span>(<span class="cm-string">'SELECT * FROM student WHERE email = ?;'</span>, [<span class="cm-variable">student</span>.<span class="cm-property">email</span>],</span></pre>
    <pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// Process the results</span></span></pre>
    <pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">function</span>(<span class="cm-def">error</span>, <span class="cm-def">rows</span>) {</span></pre>
    <pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">...</span> &nbsp; &nbsp;</span></pre>
  </div>
  </div>
  </div>
  </div>
  </div>
  <div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 138px;"></div>
  <div class="CodeMirror-gutters" style="display: none; height: 138px;"></div>
  </div>
  </div>
  </pre>
  <p><span>Notice the question mark in the string of embedded SQL. That is not valid SQL. The </span><code>db.query()</code><span> function treats it as a placeholder that it will replace with some data. The data to replace it is given by the next argument, an array of values to substitute. (In this case there is only one placeholder and one replacement value, but the array allows for multiple placeholders in the embedded query.)</span></p>
  <p><span>This is more secure because </span><code>db.query()</code><span> &quot;knows&quot; that the query string from the programmer is trustworthy but the student email value is data that can&#39;t be trusted. Before inserting the email value, it tests it for safety. For example, if the value contained semicolons, dashes, or quotes, those characters would be &quot;escaped&quot; to make them harmless.</span></p>
  <p><span>This trick of &quot;parameterizing&quot; SQL statements and safety-testing the argument values is also used by a DBMS feature called </span><strong><span>prepared statements</span></strong><span>. These statements are stored as part of the server&#39;s definition for the database-- along with definitions for tables, views, and indexes. SQL queries can then use the parameterized prepared statement, somewhat like calling a function. However, there is no SQL standard for this and the details are DBMS specific.</span></p>
  <p><span>Finally, it is important to follow the </span><a href='https://en.wikipedia.org/wiki/Principle_of_least_privilege'><span>principle of least privilege</span></a><span>. Often, application software will use a single dedicated username and password to access a DBMS server. The privileges for that account should be reduced to only those that are needed for the application to work correctly. Pay particular attention to operations that allow a query to &quot;get outside&quot; of the DBMS, like reading and writing to the filesystem, or executing OS commands.</span></p>
  <h4><a name="exercise-set-19" class="md-header-anchor"></a><span>Exercise set 19</span></h4>
  <p><span>Suppose that the Learning Center application included a form where staff could enter a student email to see that student&#39;s full name. The underlying query might be coded as follows.</span></p>
  <pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="javascript"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="javascript"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8.4209px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre>
  </div>
  <div class="CodeMirror-measure"></div>
  <div style="position: relative; z-index: 1;"></div>
  <div class="CodeMirror-code" role="presentation">
    <div class="CodeMirror-activeline" style="position: relative;">
      <div class="CodeMirror-activeline-background CodeMirror-linebackground"></div>
      <div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div>
      <pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">db</span>.<span class="cm-property">query</span>(<span class="cm-string">'SELECT first_name, last_name FROM visit WHERE email = "'</span> <span class="cm-operator">+</span> <span class="cm-variable">student</span>.<span class="cm-property">email</span> <span class="cm-operator">+</span> <span class="cm-string">'";'</span> <span class="cm-meta">...</span></span></pre>
    </div>
  </div>
  </div>
  </div>
  </div>
  </div>
  <div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 46px;"></div>
  <div class="CodeMirror-gutters" style="display: none; height: 46px;"></div>
  </div>
  </div>
  </pre>
  <p><span>Assume that the text you type into the form becomes the value of </span><code>student.email</code><span>, and the user sees a page showing the query results.</span></p>
  <p><span>Type your response in a text file. Use the filename </span><code>exercise19-1.txt</code><span> for the first exercise, and so on.</span></p>
  <ol start=''>
    <li><span>What could you enter into the form to see </span><em><span>all</span></em><span> student names in the output?</span></li>
    <li><span>What could you enter into the form to see all staff and student names in the output? (Hint: review the concept of union-compatible queries.)</span></li>
    <li><span>What could you enter into the form to get a list of sports (sport name and gender), along with the student data?</span></li>
    <li><span>What could you enter into the form to delete all student records?</span></li>
  </ol>
  <h3><a name="object-request-brokers" class="md-header-anchor"></a><span>Object Request Brokers</span></h3>
  <p><span>The JavaScript </span><code>read</code><span> function in the previous section used embedded SQL to retrieve a database record, then transformed it into a JavaScript object. This required an assignment for each object property/database column, which produces some tedious code.</span></p>
  <p><span>An object request broker (ORB) or object request manager (ORM) is a layer of software that eliminates this kind of tedium. For most object-oriented programming languages, the goal of an ORB is to add database storage capabilities to a class or object.</span></p>
  <p><span>A sophisticated ORB can eliminate the need for application programmers to embed any SQL at all. The ORB provides an application programming interface (API)-- a set of functions to call-- that abstract away the underlying database details. The app programmer can focus on their familiar objects without worrying about how they are stored and manipulated in terms of databases, tables, columns, etc.</span></p>
  <p><span>This allows the application code to be &quot;database agnostic&quot;. The application only &quot;knows&quot; about the ORB&#39;s API. One advantage of this is that an application can easily switch from (say) MySQL to (say) Microsoft SQLServer for its database server. Neither the application nor the main ORB code contains any code specific to MySQL or SQLServer. Where DBMS-specific code is absolutely necessary, the ORB will isolate it as an &quot;adapter&quot; that it uses for connecting to a specific product.</span></p>
  <p><span>Both MySQL and Microsoft SQLServer-- as well as PostgresQL, Oracle products, and many others-- are designed around the relational database model, and support standard SQL. The details are in the differences of internal storage, utility commands not standardized by SQL, and minor syntax.</span></p>
  <p><span>However, an ORB can also make it possible to move from a relational DBMS to a DBMS that is not relational. In the past decade, a number of DBMS products based on very different models have become popular.</span></p>
  <h1><a name="contents-n77" class="md-header-anchor"></a><span>Contents</span></h1>
  <div class='md-toc' mdtype='toc'>
    <p class="md-toc-content"><span class="md-toc-item md-toc-h1" data-ref="n0"><a class="md-toc-inner" href="#databases-in-context-a-just-in-time-tutorial-part-5">Databases in Context: A Just-in-Time Tutorial, Part 5</a></span><span class="md-toc-item md-toc-h2" data-ref="n9"><a class="md-toc-inner" href="#accessing-databases-from-application-code">Accessing databases from application code</a></span><span class="md-toc-item md-toc-h3" data-ref="n11"><a class="md-toc-inner" href="#embedded-sql">Embedded SQL</a></span><span class="md-toc-item md-toc-h4" data-ref="n34"><a class="md-toc-inner" href="#sql-injection-attacks">SQL injection attacks</a></span><span class="md-toc-item md-toc-h4" data-ref="n47"><a class="md-toc-inner" href="#eliminating-sql-injection-vulnerabilities">Eliminating SQL injection vulnerabilities</a></span><span class="md-toc-item md-toc-h4" data-ref="n56"><a class="md-toc-inner" href="#exercise-set-19">Exercise set 19</a></span><span class="md-toc-item md-toc-h3" data-ref="n70"><a class="md-toc-inner" href="#object-request-brokers">Object Request Brokers</a></span><span class="md-toc-item md-toc-h1" data-ref="n77"><a class="md-toc-inner" href="#contents-n77">Contents</a></span></p>
  </div><!-- After using Typora to export HTML, manually fix the top-of-page link to this contents section, and also the page <title>. -->
  </div>
</body>

</html>